# aurora-auto-control-stack

## 概要
auroraクラスターをスケジュールで起動/停止させるリソースを作るテンプレート

## 作成されるリソース
- RDSにアクセスするためのIAMロール
- 停止用lambda関数
- 停止用lambda関数のEventBridge
- 開始用lambda関数
- 開始用lambda関数のEventBridge

## 使い方
cron式のスケジュールでauroraを起動/停止します
メンテナンスウィンドウ開始の30分前に起動
終了時刻の30分後に停止といった運用で停止しておくことができます。

### cron式の変更
対象クラスターのメンテナンスウィンドウの時間によって変更してください
e,g) cron(30 10 ? * SAT * ) /毎週土曜日 10:30に実行(UTC)

### 対象クラスターへのタグ設定
自動起動/停止の対象にしたいクラスターには以下のタグをつける必要があります。
| key | value |
| ------------- | ------------- |
| autostop | yes |
| autostart  | yas |

